{"ast":null,"code":"import _toConsumableArray from \"D:\\\\react\\\\cric-ngif\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\react\\\\cric-ngif\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\react\\\\cric-ngif\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\react\\\\cric-ngif\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\react\\\\cric-ngif\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\react\\\\cric-ngif\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\react\\\\cric-ngif\\\\src\\\\components\\\\home\\\\homeCenterPanel1.js\";\nimport React, { Component } from 'react';\nimport request from 'superagent';\nimport Match from 'mathjs';\nimport Loading from '../common/loading';\nimport { Link } from 'react-router-dom';\nimport RankingContentsIdentifire from './rankingContentsIdentifire';\nimport SeriesContentsIdentifire from './seriesContentsIdentifire';\nimport OtherContentsIdentifire from './otherContentsIdentifire';\nimport '../../assets/css/home/homeCenterPanel.css'; //import axios from 'axios';\n\nvar HomeCenterPanel =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(HomeCenterPanel, _Component);\n\n  function HomeCenterPanel(props) {\n    var _this;\n\n    _classCallCheck(this, HomeCenterPanel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HomeCenterPanel).call(this, props));\n\n    _this.handleScroll = function () {\n      var offset = document.documentElement.scrollTop + window.innerHeight;\n      var height = document.documentElement.offsetHeight; //console.log(\"offset : \", Math.ceil(offset));\n      //console.log(\"height : \", height);\n\n      if (Match.ceil(offset) === height) {\n        _this.setState({\n          page: _this.state.page + 1\n        });\n\n        _this.loadSeriesRecord();\n      }\n    };\n\n    _this.loadSeriesRecord = function () {\n      var _this$state = _this.state,\n          homeContents = _this$state.homeContents,\n          hasMore = _this$state.hasMore,\n          view = _this$state.view,\n          webuser = _this$state.webuser,\n          page = _this$state.page,\n          perPage = _this$state.perPage,\n          baseUrl = _this$state.baseUrl; //fetch(\"http://back.cricwick.net/api/v3/view_lists/get_by_name?view=home\")\n      //Home Series Api  \n\n      var Url = baseUrl + '/' + 'get_by_name?view=' + view + '&web_user=' + webuser + '&page=' + page + '&per_page=' + perPage; //console.log(Url);\n\n      console.log(hasMore);\n      request.get(Url).set('Accept', 'application/json').then(function (res) {\n        _this.setState({\n          isLoaded: true,\n          isLoading: false,\n          homeContents: [].concat(_toConsumableArray(homeContents), _toConsumableArray(res.body)),\n          hasMore: res.length < perPage\n        });\n      }).catch(function (error) {\n        _this.setState({\n          isLoaded: false,\n          error: error\n        });\n      });\n    };\n\n    _this.handleClick = function (seriesObjet, redirecTo) {\n      console.log(seriesObjet, \" Redirect to : \", redirecTo); // <Redirect to={{\n      //     pathname: '/leftPanel',\n      //     state: {\n      //         viewable_type: 'series',\n      //         viewable_id  : seriesObjet.id,\n      //         page         : page,\n      //         telco        : telco,\n      //         seriesTitle  : seriesObjet.title\n      //     }\n      // }}/>\n    };\n\n    _this.state = {\n      error: null,\n      loadingGIF: '../../assets/css/common/loading.gif',\n      isLoaded: false,\n      isLoading: false,\n      homeContents: [],\n      hasMore: true,\n      view: 'home',\n      webuser: 1,\n      page: 1,\n      telco: 'mobilink',\n      perPage: 5,\n      ranking: [],\n      series: [],\n      match: null,\n      baseUrl: 'http://back.cricwick.net/api/v3/view_lists'\n    };\n    return _this;\n  }\n\n  _createClass(HomeCenterPanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener('scroll', this.handleScroll);\n      this.loadSeriesRecord();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('scroll', this.handleScroll);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          error = _this$state2.error,\n          page = _this$state2.page,\n          telco = _this$state2.telco,\n          isLoaded = _this$state2.isLoaded,\n          homeContents = _this$state2.homeContents; //let genericHome =  homeContents.filter(x => x.type === 'generic-home');\n\n      if (error) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, \" Error : \", error.message);\n      } else if (!isLoaded) {\n        return React.createElement(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"div\", {\n          onScroll: this.handleScroll,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, homeContents.map(function (series, cnt) {\n          return React.createElement(\"div\", {\n            key: cnt,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"home-div\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 132\n            },\n            __self: this\n          }, series.type === 'series' && React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136\n            },\n            __self: this\n          }, series.data.map(function (matches, mat) {\n            return React.createElement(\"div\", {\n              key: mat,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 139\n              },\n              __self: this\n            }, matches.data.map(function (match, i) {\n              return React.createElement(\"div\", {\n                key: i,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 142\n                },\n                __self: this\n              }, React.createElement(SeriesContentsIdentifire, {\n                match: match,\n                printSeriesTitle: i,\n                seriesTitle: series.title,\n                contentType: matches.type,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 143\n                },\n                __self: this\n              }));\n            }));\n          }), React.createElement(\"div\", {\n            className: \"d-flex justify-content-around mb-2\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 154\n            },\n            __self: this\n          }, React.createElement(Link, {\n            className: \"btn btn-default my-btn-default\",\n            to: {\n              pathname: \"/leftPanel/\".concat(series.series_obj.id, \"/\", 'series-title', \"/\", 'series'),\n              state: {\n                viewable_type: 'series',\n                viewable_id: series.series_obj.id,\n                page: page,\n                selectedType: 'summary',\n                telco: telco,\n                seriesTitle: series.series_obj.title\n              }\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157\n            },\n            __self: this\n          }, \" Series Home \"), series.series_obj.is_videos_enabled ? React.createElement(Link, {\n            className: \"btn btn-default my-btn-default\",\n            to: {\n              pathname: \"/leftPanel/\".concat(series.series_obj.id, \"/\", 'series-title', \"/\", 'videos'),\n              state: {\n                viewable_type: 'series',\n                viewable_id: series.series_obj.id,\n                page: page,\n                selectedType: 'videos',\n                telco: telco,\n                seriesTitle: series.series_obj.title\n              }\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 173\n            },\n            __self: this\n          }, \"Videos\") : '', series.series_obj.has_points_table ? // <button className='btn btn-default my-btn-default' \n          //           onClick={() => this.handleClick(series.series_obj,'series-pointtable') }>Point Table</button> : ''}\n          React.createElement(Link, {\n            className: \"btn btn-default my-btn-default\",\n            to: {\n              pathname: \"/leftPanel/\".concat(series.series_obj.id, \"/\", 'series-title', \"/\", 'pointtable'),\n              state: {\n                viewable_type: 'series',\n                viewable_id: series.series_obj.id,\n                page: page,\n                selectedType: 'point_table',\n                telco: telco,\n                seriesTitle: series.series_obj.title\n              }\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 189\n            },\n            __self: this\n          }, \"Point Table\") : '')), series.type === 'video' && React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 210\n            },\n            __self: this\n          }, React.createElement(OtherContentsIdentifire, {\n            contents: series,\n            contentType: series.type,\n            typeVideo: 'video',\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 211\n            },\n            __self: this\n          })), series.type === 'generic-home' && React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 221\n            },\n            __self: this\n          }, console.log(series), React.createElement(OtherContentsIdentifire, {\n            contents: series,\n            contentType: series.type,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 223\n            },\n            __self: this\n          })), series.type === 'ranking' && React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 233\n            },\n            __self: this\n          }, React.createElement(RankingContentsIdentifire, {\n            contents: series,\n            contentType: series.type,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 234\n            },\n            __self: this\n          }))));\n        }));\n      }\n    }\n  }]);\n\n  return HomeCenterPanel;\n}(Component);\n\nexport default HomeCenterPanel;","map":{"version":3,"sources":["D:\\react\\cric-ngif\\src\\components\\home\\homeCenterPanel1.js"],"names":["React","Component","request","Match","Loading","Link","RankingContentsIdentifire","SeriesContentsIdentifire","OtherContentsIdentifire","HomeCenterPanel","props","handleScroll","offset","document","documentElement","scrollTop","window","innerHeight","height","offsetHeight","ceil","setState","page","state","loadSeriesRecord","homeContents","hasMore","view","webuser","perPage","baseUrl","Url","console","log","get","set","then","res","isLoaded","isLoading","body","length","catch","error","handleClick","seriesObjet","redirecTo","loadingGIF","telco","ranking","series","match","addEventListener","removeEventListener","message","map","cnt","type","data","matches","mat","i","title","pathname","series_obj","id","viewable_type","viewable_id","selectedType","seriesTitle","is_videos_enabled","has_points_table"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport request from 'superagent';\r\nimport Match from 'mathjs';\r\nimport Loading from '../common/loading';\r\nimport { Link } from 'react-router-dom';\r\nimport RankingContentsIdentifire from './rankingContentsIdentifire';\r\nimport SeriesContentsIdentifire from './seriesContentsIdentifire';\r\nimport OtherContentsIdentifire from './otherContentsIdentifire';\r\n\r\n\r\nimport '../../assets/css/home/homeCenterPanel.css';\r\n//import axios from 'axios';\r\n\r\nclass HomeCenterPanel extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            error: null,\r\n            loadingGIF: '../../assets/css/common/loading.gif',\r\n            isLoaded: false,\r\n            isLoading: false,\r\n            homeContents: [],\r\n            hasMore: true,\r\n            view: 'home',\r\n            webuser: 1,\r\n            page: 1,\r\n            telco: 'mobilink',\r\n            perPage: 5,\r\n            ranking: [],\r\n            series: [],\r\n            match: null,\r\n            baseUrl: 'http://back.cricwick.net/api/v3/view_lists'\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        this.loadSeriesRecord();\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    handleScroll = () => {\r\n\r\n        let offset = (document.documentElement.scrollTop + window.innerHeight);\r\n        let height = document.documentElement.offsetHeight;\r\n\r\n        //console.log(\"offset : \", Math.ceil(offset));\r\n        //console.log(\"height : \", height);\r\n\r\n\r\n        if (Match.ceil(offset) === height) {\r\n            this.setState({ page: this.state.page + 1 });\r\n            this.loadSeriesRecord();\r\n        }\r\n\r\n    }\r\n\r\n    loadSeriesRecord = () => {\r\n        const { homeContents, hasMore, view, webuser, page, perPage, baseUrl } = this.state;\r\n        //fetch(\"http://back.cricwick.net/api/v3/view_lists/get_by_name?view=home\")\r\n        //Home Series Api  \r\n        const Url = baseUrl + '/'\r\n            + 'get_by_name?view=' + view\r\n            + '&web_user=' + webuser\r\n            + '&page=' + page\r\n            + '&per_page=' + perPage;\r\n\r\n        //console.log(Url);\r\n        console.log(hasMore);\r\n\r\n        request\r\n            .get(Url)\r\n            .set('Accept', 'application/json')\r\n            .then(res => {\r\n                this.setState({\r\n                    isLoaded: true,\r\n                    isLoading: false,\r\n                    homeContents: [...homeContents, ...res.body],\r\n                    hasMore: (res.length < perPage)\r\n                });\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    isLoaded: false,\r\n                    error\r\n                });\r\n            });\r\n    }\r\n\r\n    handleClick = (seriesObjet, redirecTo) => {\r\n        console.log(seriesObjet, \" Redirect to : \", redirecTo);\r\n\r\n        // <Redirect to={{\r\n        //     pathname: '/leftPanel',\r\n        //     state: {\r\n        //         viewable_type: 'series',\r\n        //         viewable_id  : seriesObjet.id,\r\n        //         page         : page,\r\n        //         telco        : telco,\r\n        //         seriesTitle  : seriesObjet.title\r\n        //     }\r\n        // }}/>\r\n\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        const { error, page, telco, isLoaded, homeContents } = this.state;\r\n\r\n        //let genericHome =  homeContents.filter(x => x.type === 'generic-home');\r\n\r\n        if (error) {\r\n            return (<div> Error : {error.message}</div>);\r\n        } else if (!isLoaded) {\r\n            return (<Loading />);\r\n        } else {\r\n\r\n            return (\r\n\r\n                <div onScroll={this.handleScroll}>\r\n\r\n                    {/* Itreate top level contents line Series and Other Data */}\r\n                    {homeContents.map((series, cnt) => (\r\n                        <div key={cnt}>\r\n\r\n                            <div className=\"home-div\">\r\n\r\n                                {/* Check Either the Current Level of Itration is a ( SERIES) */}\r\n                                {series.type === 'series' &&\r\n                                    <div>\r\n                                        {series.data.map((matches, mat) => (\r\n\r\n                                            <div key={mat} >\r\n                                                {/* Render Series Contents Matches/Videos/Articles/Tweets etc */}\r\n                                                {matches.data.map((match, i) => (\r\n                                                    <div key={i}>\r\n                                                        <SeriesContentsIdentifire match={match}\r\n                                                            printSeriesTitle={i}\r\n                                                            seriesTitle={series.title}\r\n                                                            contentType={matches.type} />\r\n                                                    </div>\r\n                                                ))}\r\n                                                {/* ----------------- End Series Contents ------------- */}\r\n                                            </div>\r\n                                        ))}\r\n\r\n                                        {/* Render BUTTONS with equal width dynamicly at end of Series */}\r\n                                        <div className='d-flex justify-content-around mb-2' >\r\n                                            {/* https://back.cricwick.net/api/v2/view_lists/get_list_items_from_viewable?viewable_type=series&viewable_id=157&page=1&telco=mobilink */}\r\n\r\n                                            <Link className='btn btn-default my-btn-default'\r\n                                                to={{\r\n                                                    pathname: `/leftPanel/${series.series_obj.id}/${'series-title'}/${'series'}`,\r\n                                                    state: {\r\n                                                        viewable_type: 'series',\r\n                                                        viewable_id: series.series_obj.id,\r\n                                                        page: page,\r\n                                                        selectedType: 'summary',\r\n                                                        telco: telco,\r\n                                                        seriesTitle: series.series_obj.title\r\n                                                    }\r\n                                                }}> Series Home </Link>\r\n                                            {/* onClick={() => this.handleClick(series.series_obj,'series-home') } >Series Home</button> */}\r\n\r\n                                            {series.series_obj.is_videos_enabled ?\r\n\r\n                                                <Link className='btn btn-default my-btn-default'\r\n                                                    to={{\r\n                                                        pathname: `/leftPanel/${series.series_obj.id}/${'series-title'}/${'videos'}`,\r\n                                                        state: {\r\n                                                            viewable_type: 'series',\r\n                                                            viewable_id: series.series_obj.id,\r\n                                                            page: page,\r\n                                                            selectedType: 'videos',\r\n                                                            telco: telco,\r\n                                                            seriesTitle: series.series_obj.title\r\n                                                        }\r\n                                                    }}>Videos</Link> : ''}\r\n\r\n                                            {series.series_obj.has_points_table ?\r\n                                                // <button className='btn btn-default my-btn-default' \r\n                                                //           onClick={() => this.handleClick(series.series_obj,'series-pointtable') }>Point Table</button> : ''}\r\n                                                <Link className='btn btn-default my-btn-default'\r\n\r\n                                                    to={{\r\n                                                        pathname: `/leftPanel/${series.series_obj.id}/${'series-title'}/${'pointtable'}`,\r\n                                                        state: {\r\n                                                            viewable_type: 'series',\r\n                                                            viewable_id: series.series_obj.id,\r\n                                                            page: page,\r\n                                                            selectedType: 'point_table',\r\n                                                            telco: telco,\r\n                                                            seriesTitle: series.series_obj.title\r\n                                                        }\r\n                                                    }}>Point Table</Link> : ''}\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                }\r\n\r\n                                {/* -------------------------------------------------------------------------- */}\r\n                                {/* Check Either the Current Level of Itration Itration is VIDEO */}\r\n                                {series.type === 'video' &&\r\n                                    <div>\r\n                                        <OtherContentsIdentifire contents={series}\r\n                                            contentType={series.type}\r\n                                            typeVideo={'video'}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n\r\n                                {/* ------------------------------------------------------------------------- */}\r\n                                {/* Check Either the Current Level of Itration Itration is GENERIC-HOME */}\r\n                                {series.type === 'generic-home' &&\r\n                                    <div>\r\n                                        {console.log(series)}\r\n                                        <OtherContentsIdentifire contents={series}\r\n                                            contentType={series.type}\r\n                                        />\r\n\r\n                                    </div>\r\n                                }\r\n                                {/* ------------------------------------------------------------------------- */}\r\n\r\n                                {/* Check Either the Current Level of Itration is RANKING */}\r\n                                {series.type === 'ranking' &&\r\n                                    <div>\r\n                                        <RankingContentsIdentifire contents={series}\r\n                                            contentType={series.type}\r\n\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                                {/* ------------------------------------------------------------------------- */}\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n                    ))}\r\n                    {/* -------------END OF ITRATION--------------------------- */}\r\n\r\n                </div>\r\n            )\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport default HomeCenterPanel;\r\n"]},"metadata":{},"sourceType":"module"}